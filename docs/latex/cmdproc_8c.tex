\doxysection{src/modules/cmdproc.c File Reference}
\hypertarget{cmdproc_8c}{}\label{cmdproc_8c}\index{src/modules/cmdproc.c@{src/modules/cmdproc.c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include "{}cmdproc.\+h"{}}\newline
{\ttfamily \#include "{}rtdb.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{cmdproc_8c_afbdfe0465dfd34a5f244fe41fa27c12a}{cmd\+Processor}} (void)
\begin{DoxyCompactList}\small\item\em Processes received UART commands and generates appropriate responses. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8c_a2a0e03d8d8ff0f0459f7623ffd6d39b1}{calc\+Checksum}} (unsigned char \texorpdfstring{$\ast$}{*}buf, int nbytes)
\begin{DoxyCompactList}\small\item\em Calculates 8-\/bit checksum for a given buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8c_a67ae8a79a708a3c5471668bddbd16400}{rx\+Char}} (unsigned char car)
\begin{DoxyCompactList}\small\item\em Appends a character to the receive buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8c_abdb4363f0662688850bbcdfb59ce4566}{tx\+Char}} (unsigned char car)
\begin{DoxyCompactList}\small\item\em Appends a character to the transmit buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8c_a918f38a7eecdd03671d28a3a07f94856}{reset\+Rx\+Buffer}} (void)
\begin{DoxyCompactList}\small\item\em Resets the UART receive buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8c_abd91ad9b5887f4769f45823899583bab}{reset\+Tx\+Buffer}} (void)
\begin{DoxyCompactList}\small\item\em Resets the UART transmit buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8c_a8beeddde9a644610c72724be856db6dd}{get\+Tx\+Buffer}} (unsigned char \texorpdfstring{$\ast$}{*}buf, int \texorpdfstring{$\ast$}{*}len)
\begin{DoxyCompactList}\small\item\em Retrieves the contents of the transmit buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8c_a257f53fb5eb850ccbf3ac26a614b152e}{get\+Rx\+Buffer\+Size}} (void)
\begin{DoxyCompactList}\small\item\em Returns the size of the receive buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8c_a2397dd1c9b60734d3afa3f3a48d47822}{get\+Tx\+Buffer\+Size}} (void)
\begin{DoxyCompactList}\small\item\em Returns the size of the transmit buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8c_ab2f4aac88c91f6afd0d002d16ccff36f}{send\+\_\+ack}} (int type)
\begin{DoxyCompactList}\small\item\em Sends an acknowledgment message with appropriate checksum. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{cmdproc_8c_a2a0e03d8d8ff0f0459f7623ffd6d39b1}\index{cmdproc.c@{cmdproc.c}!calcChecksum@{calcChecksum}}
\index{calcChecksum@{calcChecksum}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{calcChecksum()}{calcChecksum()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a2a0e03d8d8ff0f0459f7623ffd6d39b1} 
int calc\+Checksum (\begin{DoxyParamCaption}\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{buf}{, }\item[{int}]{nbytes}{}\end{DoxyParamCaption})}



Calculates 8-\/bit checksum for a given buffer. 


\begin{DoxyParams}{Parameters}
{\em buf} & Pointer to buffer. \\
\hline
{\em nbytes} & Number of bytes to compute. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Calculated checksum. 
\end{DoxyReturn}
\Hypertarget{cmdproc_8c_afbdfe0465dfd34a5f244fe41fa27c12a}\index{cmdproc.c@{cmdproc.c}!cmdProcessor@{cmdProcessor}}
\index{cmdProcessor@{cmdProcessor}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{cmdProcessor()}{cmdProcessor()}}
{\footnotesize\ttfamily \label{cmdproc_8c_afbdfe0465dfd34a5f244fe41fa27c12a} 
int cmd\+Processor (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Processes received UART commands and generates appropriate responses. 

Supported commands\+:
\begin{DoxyItemize}
\item \#C...!\+: Get current temperature.
\item \#D...!\+: Get desired temperature.
\item \#M...!\+: Set desired temperature.
\item \#S...!\+: Set PID parameters.
\item \#V...!\+: Toggle verbose mode.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
int Status code\+:
\begin{DoxyItemize}
\item 0\+: Success
\item -\/1\+: Empty buffer
\item -\/2\+: Invalid command
\item -\/3\+: Checksum error
\item -\/4\+: Framing error 
\end{DoxyItemize}
\end{DoxyReturn}
\Hypertarget{cmdproc_8c_a257f53fb5eb850ccbf3ac26a614b152e}\index{cmdproc.c@{cmdproc.c}!getRxBufferSize@{getRxBufferSize}}
\index{getRxBufferSize@{getRxBufferSize}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{getRxBufferSize()}{getRxBufferSize()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a257f53fb5eb850ccbf3ac26a614b152e} 
int get\+Rx\+Buffer\+Size (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Returns the size of the receive buffer. 

\begin{DoxyReturn}{Returns}
int Receive buffer length. 
\end{DoxyReturn}
\Hypertarget{cmdproc_8c_a8beeddde9a644610c72724be856db6dd}\index{cmdproc.c@{cmdproc.c}!getTxBuffer@{getTxBuffer}}
\index{getTxBuffer@{getTxBuffer}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{getTxBuffer()}{getTxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a8beeddde9a644610c72724be856db6dd} 
void get\+Tx\+Buffer (\begin{DoxyParamCaption}\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{buf}{, }\item[{int \texorpdfstring{$\ast$}{*}}]{len}{}\end{DoxyParamCaption})}



Retrieves the contents of the transmit buffer. 


\begin{DoxyParams}{Parameters}
{\em buf} & Pointer to destination buffer. \\
\hline
{\em len} & Pointer to variable storing transmit length. \\
\hline
\end{DoxyParams}
\Hypertarget{cmdproc_8c_a2397dd1c9b60734d3afa3f3a48d47822}\index{cmdproc.c@{cmdproc.c}!getTxBufferSize@{getTxBufferSize}}
\index{getTxBufferSize@{getTxBufferSize}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{getTxBufferSize()}{getTxBufferSize()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a2397dd1c9b60734d3afa3f3a48d47822} 
int get\+Tx\+Buffer\+Size (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Returns the size of the transmit buffer. 

\begin{DoxyReturn}{Returns}
int Transmit buffer length. 
\end{DoxyReturn}
\Hypertarget{cmdproc_8c_a918f38a7eecdd03671d28a3a07f94856}\index{cmdproc.c@{cmdproc.c}!resetRxBuffer@{resetRxBuffer}}
\index{resetRxBuffer@{resetRxBuffer}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{resetRxBuffer()}{resetRxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a918f38a7eecdd03671d28a3a07f94856} 
void reset\+Rx\+Buffer (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Resets the UART receive buffer. 

\Hypertarget{cmdproc_8c_abd91ad9b5887f4769f45823899583bab}\index{cmdproc.c@{cmdproc.c}!resetTxBuffer@{resetTxBuffer}}
\index{resetTxBuffer@{resetTxBuffer}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{resetTxBuffer()}{resetTxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8c_abd91ad9b5887f4769f45823899583bab} 
void reset\+Tx\+Buffer (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Resets the UART transmit buffer. 

\Hypertarget{cmdproc_8c_a67ae8a79a708a3c5471668bddbd16400}\index{cmdproc.c@{cmdproc.c}!rxChar@{rxChar}}
\index{rxChar@{rxChar}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{rxChar()}{rxChar()}}
{\footnotesize\ttfamily \label{cmdproc_8c_a67ae8a79a708a3c5471668bddbd16400} 
int rx\+Char (\begin{DoxyParamCaption}\item[{unsigned char}]{car}{}\end{DoxyParamCaption})}



Appends a character to the receive buffer. 


\begin{DoxyParams}{Parameters}
{\em car} & Character to append. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if success, -\/1 if buffer full. 
\end{DoxyReturn}
\Hypertarget{cmdproc_8c_ab2f4aac88c91f6afd0d002d16ccff36f}\index{cmdproc.c@{cmdproc.c}!send\_ack@{send\_ack}}
\index{send\_ack@{send\_ack}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{send\_ack()}{send\_ack()}}
{\footnotesize\ttfamily \label{cmdproc_8c_ab2f4aac88c91f6afd0d002d16ccff36f} 
void send\+\_\+ack (\begin{DoxyParamCaption}\item[{int}]{type}{}\end{DoxyParamCaption})}



Sends an acknowledgment message with appropriate checksum. 


\begin{DoxyParams}{Parameters}
{\em type} & Acknowledgment type\+:
\begin{DoxyItemize}
\item 0\+: OK
\item 1\+: Framing error
\item 2\+: Checksum error
\item 3\+: Invalid command 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\Hypertarget{cmdproc_8c_abdb4363f0662688850bbcdfb59ce4566}\index{cmdproc.c@{cmdproc.c}!txChar@{txChar}}
\index{txChar@{txChar}!cmdproc.c@{cmdproc.c}}
\doxysubsubsection{\texorpdfstring{txChar()}{txChar()}}
{\footnotesize\ttfamily \label{cmdproc_8c_abdb4363f0662688850bbcdfb59ce4566} 
int tx\+Char (\begin{DoxyParamCaption}\item[{unsigned char}]{car}{}\end{DoxyParamCaption})}



Appends a character to the transmit buffer. 


\begin{DoxyParams}{Parameters}
{\em car} & Character to append. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if success, -\/1 if buffer full. 
\end{DoxyReturn}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Thermal Control System - SETR: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Thermal Control System - SETR<span id="projectnumber">&#160;1.3</span>
   </div>
   <div id="projectbrief">Third Project for the SETR class of 2024-2025 at Universidade of Aveiro</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('main_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main system controller for temperature regulation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;zephyr/kernel.h&gt;</code><br />
<code>#include &lt;zephyr/device.h&gt;</code><br />
<code>#include &lt;zephyr/devicetree.h&gt;</code><br />
<code>#include &lt;zephyr/drivers/gpio.h&gt;</code><br />
<code>#include &lt;zephyr/drivers/i2c.h&gt;</code><br />
<code>#include &lt;zephyr/drivers/uart.h&gt;</code><br />
<code>#include &lt;zephyr/sys/printk.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="rtdb_8h_source.html">modules/rtdb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buttons_8h_source.html">modules/buttons.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="PID_8h_source.html">modules/PID.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cmdproc_8h_source.html">modules/cmdproc.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa90cac659d18e8ef6294c7ae337f6b58" id="r_aa90cac659d18e8ef6294c7ae337f6b58"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa90cac659d18e8ef6294c7ae337f6b58">SUCCESS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aa90cac659d18e8ef6294c7ae337f6b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae03a6d163a5dac57274d28e3d7bbf61a" id="r_ae03a6d163a5dac57274d28e3d7bbf61a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae03a6d163a5dac57274d28e3d7bbf61a">ERR_FATAL</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:ae03a6d163a5dac57274d28e3d7bbf61a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a661852bec8ab9683d43ad02881c2f2b5" id="r_a661852bec8ab9683d43ad02881c2f2b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a661852bec8ab9683d43ad02881c2f2b5">LED0_NODE</a>&#160;&#160;&#160;DT_ALIAS(led0)</td></tr>
<tr class="separator:a661852bec8ab9683d43ad02881c2f2b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b7bbb65d5065e43a35775d9fc3e322" id="r_ac8b7bbb65d5065e43a35775d9fc3e322"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8b7bbb65d5065e43a35775d9fc3e322">LED1_NODE</a>&#160;&#160;&#160;DT_ALIAS(led1)</td></tr>
<tr class="separator:ac8b7bbb65d5065e43a35775d9fc3e322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9014b2cb02041c926b50b6411232ee82" id="r_a9014b2cb02041c926b50b6411232ee82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9014b2cb02041c926b50b6411232ee82">LED2_NODE</a>&#160;&#160;&#160;DT_ALIAS(led2)</td></tr>
<tr class="separator:a9014b2cb02041c926b50b6411232ee82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5246f73682d98292ef7d7b038582700" id="r_ad5246f73682d98292ef7d7b038582700"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5246f73682d98292ef7d7b038582700">LED3_NODE</a>&#160;&#160;&#160;DT_ALIAS(led3)</td></tr>
<tr class="separator:ad5246f73682d98292ef7d7b038582700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90ec00e9f145d6e45a95b8f3427bd492" id="r_a90ec00e9f145d6e45a95b8f3427bd492"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90ec00e9f145d6e45a95b8f3427bd492">led_thread_period</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:a90ec00e9f145d6e45a95b8f3427bd492"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79aaa89920d05217559f07e3602af050" id="r_a79aaa89920d05217559f07e3602af050"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a79aaa89920d05217559f07e3602af050">TC74_CMD_RTR</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a79aaa89920d05217559f07e3602af050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cba5a0e57322b7316b506dc43b8c699" id="r_a4cba5a0e57322b7316b506dc43b8c699"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cba5a0e57322b7316b506dc43b8c699">TC74_CMD_RWCR</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a4cba5a0e57322b7316b506dc43b8c699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61e15cb2413134ad4873a095057ba60e" id="r_a61e15cb2413134ad4873a095057ba60e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61e15cb2413134ad4873a095057ba60e">I2C0_NID</a>&#160;&#160;&#160;DT_NODELABEL(tc74sensor)</td></tr>
<tr class="separator:a61e15cb2413134ad4873a095057ba60e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70fdf721e437e719d33b32d0c83c2bba" id="r_a70fdf721e437e719d33b32d0c83c2bba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a70fdf721e437e719d33b32d0c83c2bba">temp_read_thread_period</a>&#160;&#160;&#160;250</td></tr>
<tr class="separator:a70fdf721e437e719d33b32d0c83c2bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d83f8872fa8151f12642f59463aa34b" id="r_a9d83f8872fa8151f12642f59463aa34b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d83f8872fa8151f12642f59463aa34b">FET_NODE</a>&#160;&#160;&#160;DT_ALIAS(fetpin)</td></tr>
<tr class="separator:a9d83f8872fa8151f12642f59463aa34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b40c5bd9acc44f62a9182527dbcc9b" id="r_a07b40c5bd9acc44f62a9182527dbcc9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07b40c5bd9acc44f62a9182527dbcc9b">UART_NODE</a>&#160;&#160;&#160;DT_NODELABEL(uart0)</td></tr>
<tr class="separator:a07b40c5bd9acc44f62a9182527dbcc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630686ccbe0cb17e592951055a5da582" id="r_a630686ccbe0cb17e592951055a5da582"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a630686ccbe0cb17e592951055a5da582">RXBUF_SIZE</a>&#160;&#160;&#160;60</td></tr>
<tr class="separator:a630686ccbe0cb17e592951055a5da582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923af2d146f214e75816a7f5993cee29" id="r_a923af2d146f214e75816a7f5993cee29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a923af2d146f214e75816a7f5993cee29">TXBUF_SIZE</a>&#160;&#160;&#160;60</td></tr>
<tr class="separator:a923af2d146f214e75816a7f5993cee29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b8af8bedcac87c0d3c68634448b94a7" id="r_a8b8af8bedcac87c0d3c68634448b94a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b8af8bedcac87c0d3c68634448b94a7">MSG_BUF_SIZE</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a8b8af8bedcac87c0d3c68634448b94a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6426fc74901f4fbec94862ebb672b81" id="r_ab6426fc74901f4fbec94862ebb672b81"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6426fc74901f4fbec94862ebb672b81">RX_TIMEOUT</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:ab6426fc74901f4fbec94862ebb672b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af123d816789543a0b63b64f6d4dd4735" id="r_af123d816789543a0b63b64f6d4dd4735"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af123d816789543a0b63b64f6d4dd4735">K_TIMER_DEFINE</a> (led_thread_timer, NULL, NULL)</td></tr>
<tr class="separator:af123d816789543a0b63b64f6d4dd4735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fc246ee29d0c24b2ec38c5d3da1a43" id="r_a47fc246ee29d0c24b2ec38c5d3da1a43"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47fc246ee29d0c24b2ec38c5d3da1a43">K_TIMER_DEFINE</a> (temp_read_thread_timer, NULL, NULL)</td></tr>
<tr class="separator:a47fc246ee29d0c24b2ec38c5d3da1a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b83f35eb770e6c215ba14af141453a" id="r_a23b83f35eb770e6c215ba14af141453a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23b83f35eb770e6c215ba14af141453a">led_update_task</a> (void)</td></tr>
<tr class="memdesc:a23b83f35eb770e6c215ba14af141453a"><td class="mdescLeft">&#160;</td><td class="mdescRight">LED update task.  <br /></td></tr>
<tr class="separator:a23b83f35eb770e6c215ba14af141453a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41f948b647a1b72a9c59623255c5c5ae" id="r_a41f948b647a1b72a9c59623255c5c5ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41f948b647a1b72a9c59623255c5c5ae">K_THREAD_DEFINE</a> (led_task_id, 1024, <a class="el" href="#a23b83f35eb770e6c215ba14af141453a">led_update_task</a>, NULL, NULL, NULL, 5, 0, 0)</td></tr>
<tr class="separator:a41f948b647a1b72a9c59623255c5c5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac483e8e0dcfa5da2b5c63fbd255b8d96" id="r_ac483e8e0dcfa5da2b5c63fbd255b8d96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac483e8e0dcfa5da2b5c63fbd255b8d96">read_temperature_task</a> (void)</td></tr>
<tr class="memdesc:ac483e8e0dcfa5da2b5c63fbd255b8d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temperature reading task.  <br /></td></tr>
<tr class="separator:ac483e8e0dcfa5da2b5c63fbd255b8d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b3f2f07cc675e12d5237aee1224244" id="r_a23b3f2f07cc675e12d5237aee1224244"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a23b3f2f07cc675e12d5237aee1224244">K_THREAD_DEFINE</a> (temp_read_task_id, 1024, <a class="el" href="#ac483e8e0dcfa5da2b5c63fbd255b8d96">read_temperature_task</a>, NULL, NULL, NULL, 5, 0, 0)</td></tr>
<tr class="separator:a23b3f2f07cc675e12d5237aee1224244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4ed6d9069244aadb70f0c304d88ffa" id="r_a9a4ed6d9069244aadb70f0c304d88ffa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9a4ed6d9069244aadb70f0c304d88ffa">pid_controller_task</a> (void)</td></tr>
<tr class="memdesc:a9a4ed6d9069244aadb70f0c304d88ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">PID controller task.  <br /></td></tr>
<tr class="separator:a9a4ed6d9069244aadb70f0c304d88ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae66f738f9813b09b24efe29eb33a31" id="r_a4ae66f738f9813b09b24efe29eb33a31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ae66f738f9813b09b24efe29eb33a31">K_THREAD_DEFINE</a> (pid_task_id, 1024, <a class="el" href="#a9a4ed6d9069244aadb70f0c304d88ffa">pid_controller_task</a>, NULL, NULL, NULL, 5, 0, 0)</td></tr>
<tr class="separator:a4ae66f738f9813b09b24efe29eb33a31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2619e58b25b1bcc59e20cb1b73c7310e" id="r_a2619e58b25b1bcc59e20cb1b73c7310e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2619e58b25b1bcc59e20cb1b73c7310e">heat_control_task</a> (void)</td></tr>
<tr class="memdesc:a2619e58b25b1bcc59e20cb1b73c7310e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Heater control task.  <br /></td></tr>
<tr class="separator:a2619e58b25b1bcc59e20cb1b73c7310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5b560954b6462095818770d0e7789e" id="r_a8a5b560954b6462095818770d0e7789e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a5b560954b6462095818770d0e7789e">K_THREAD_DEFINE</a> (heat_task_id, 1024, <a class="el" href="#a2619e58b25b1bcc59e20cb1b73c7310e">heat_control_task</a>, NULL, NULL, NULL, 5, 0, 0)</td></tr>
<tr class="separator:a8a5b560954b6462095818770d0e7789e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af619fe0b949297d40d50ab9f41e96999" id="r_af619fe0b949297d40d50ab9f41e96999"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af619fe0b949297d40d50ab9f41e96999">uart_init</a> (void)</td></tr>
<tr class="memdesc:af619fe0b949297d40d50ab9f41e96999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the UART peripheral.  <br /></td></tr>
<tr class="separator:af619fe0b949297d40d50ab9f41e96999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8520d3a5423e6fd8cf267bd72b5aa4" id="r_a5b8520d3a5423e6fd8cf267bd72b5aa4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b8520d3a5423e6fd8cf267bd72b5aa4">uart_command_task</a> (void)</td></tr>
<tr class="memdesc:a5b8520d3a5423e6fd8cf267bd72b5aa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART command processing task.  <br /></td></tr>
<tr class="separator:a5b8520d3a5423e6fd8cf267bd72b5aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b80325be28ebb0081ca82b0e7bd70d" id="r_ae1b80325be28ebb0081ca82b0e7bd70d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1b80325be28ebb0081ca82b0e7bd70d">K_THREAD_DEFINE</a> (uart_command_id, 1024, <a class="el" href="#a5b8520d3a5423e6fd8cf267bd72b5aa4">uart_command_task</a>, NULL, NULL, NULL, 5, 0, 0)</td></tr>
<tr class="separator:ae1b80325be28ebb0081ca82b0e7bd70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acbbb8dc9e34f2cbd68792504dc18da81" id="r_acbbb8dc9e34f2cbd68792504dc18da81"><td class="memItemLeft" align="right" valign="top">const struct uart_config&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acbbb8dc9e34f2cbd68792504dc18da81">uart_cfg</a></td></tr>
<tr class="separator:acbbb8dc9e34f2cbd68792504dc18da81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660f23134aaae43c9ff2c6096fa59342" id="r_a660f23134aaae43c9ff2c6096fa59342"><td class="memItemLeft" align="right" valign="top">const struct device *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a660f23134aaae43c9ff2c6096fa59342">uart_dev</a> = DEVICE_DT_GET(<a class="el" href="#a07b40c5bd9acc44f62a9182527dbcc9b">UART_NODE</a>)</td></tr>
<tr class="separator:a660f23134aaae43c9ff2c6096fa59342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f447b32df78b68d1bd7a3581558ca3a" id="r_a7f447b32df78b68d1bd7a3581558ca3a"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f447b32df78b68d1bd7a3581558ca3a">uart_rxbuf_nchar</a> = 0</td></tr>
<tr class="separator:a7f447b32df78b68d1bd7a3581558ca3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9de6e69e47b326696d8303de20afcb" id="r_a3f9de6e69e47b326696d8303de20afcb"><td class="memItemLeft" align="right" valign="top">struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3f9de6e69e47b326696d8303de20afcb">sensor_to_controller_sem</a> = Z_SEM_INITIALIZER(sensor_to_controller_sem, 0, 1)</td></tr>
<tr class="separator:a3f9de6e69e47b326696d8303de20afcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df4b86b2be1ca845e6ac8add540df7a" id="r_a1df4b86b2be1ca845e6ac8add540df7a"><td class="memItemLeft" align="right" valign="top">struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1df4b86b2be1ca845e6ac8add540df7a">controller_to_heater_sem</a> = Z_SEM_INITIALIZER(controller_to_heater_sem, 0, 1)</td></tr>
<tr class="separator:a1df4b86b2be1ca845e6ac8add540df7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb968f8cb59beade3bda9ee995ecd109" id="r_acb968f8cb59beade3bda9ee995ecd109"><td class="memItemLeft" align="right" valign="top">struct k_sem&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acb968f8cb59beade3bda9ee995ecd109">uart_full_message_sem</a> = Z_SEM_INITIALIZER(uart_full_message_sem, 0, 1)</td></tr>
<tr class="separator:acb968f8cb59beade3bda9ee995ecd109"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a488edcde5226181def32ff5e16641bca" id="r_a488edcde5226181def32ff5e16641bca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a488edcde5226181def32ff5e16641bca">startingMessage</a> = false</td></tr>
<tr class="separator:a488edcde5226181def32ff5e16641bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main system controller for temperature regulation. </p>
<p>This module initializes all system components including:</p><ul>
<li>LED indicators</li>
<li>Temperature sensor (TC74 via I2C)</li>
<li>Heater control (via FET)</li>
<li>UART communication interface</li>
<li>Real-Time Database (RTDB)</li>
<li>Button inputs</li>
</ul>
<p>The system implements a PID controller for temperature regulation with multiple threads handling different aspects of the control system. </p><dl class="section author"><dt>Author</dt><dd>Pedro Ramos, n.º 107348 </dd>
<dd>
Rafael Morgado, n.º 104277 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>01/06/2025 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae03a6d163a5dac57274d28e3d7bbf61a" name="ae03a6d163a5dac57274d28e3d7bbf61a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03a6d163a5dac57274d28e3d7bbf61a">&#9670;&#160;</a></span>ERR_FATAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERR_FATAL&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fatal error return code </p>

</div>
</div>
<a id="a9d83f8872fa8151f12642f59463aa34b" name="a9d83f8872fa8151f12642f59463aa34b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d83f8872fa8151f12642f59463aa34b">&#9670;&#160;</a></span>FET_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FET_NODE&#160;&#160;&#160;DT_ALIAS(fetpin)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree alias for FET control pin </p>

</div>
</div>
<a id="a61e15cb2413134ad4873a095057ba60e" name="a61e15cb2413134ad4873a095057ba60e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61e15cb2413134ad4873a095057ba60e">&#9670;&#160;</a></span>I2C0_NID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C0_NID&#160;&#160;&#160;DT_NODELABEL(tc74sensor)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree node identifier for TC74 sensor </p>

</div>
</div>
<a id="a661852bec8ab9683d43ad02881c2f2b5" name="a661852bec8ab9683d43ad02881c2f2b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a661852bec8ab9683d43ad02881c2f2b5">&#9670;&#160;</a></span>LED0_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED0_NODE&#160;&#160;&#160;DT_ALIAS(led0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree alias for LED0 </p>

</div>
</div>
<a id="ac8b7bbb65d5065e43a35775d9fc3e322" name="ac8b7bbb65d5065e43a35775d9fc3e322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b7bbb65d5065e43a35775d9fc3e322">&#9670;&#160;</a></span>LED1_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED1_NODE&#160;&#160;&#160;DT_ALIAS(led1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree alias for LED1 </p>

</div>
</div>
<a id="a9014b2cb02041c926b50b6411232ee82" name="a9014b2cb02041c926b50b6411232ee82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9014b2cb02041c926b50b6411232ee82">&#9670;&#160;</a></span>LED2_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED2_NODE&#160;&#160;&#160;DT_ALIAS(led2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree alias for LED2 </p>

</div>
</div>
<a id="ad5246f73682d98292ef7d7b038582700" name="ad5246f73682d98292ef7d7b038582700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5246f73682d98292ef7d7b038582700">&#9670;&#160;</a></span>LED3_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED3_NODE&#160;&#160;&#160;DT_ALIAS(led3)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree alias for LED3 </p>

</div>
</div>
<a id="a90ec00e9f145d6e45a95b8f3427bd492" name="a90ec00e9f145d6e45a95b8f3427bd492"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90ec00e9f145d6e45a95b8f3427bd492">&#9670;&#160;</a></span>led_thread_period</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define led_thread_period&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>LED update period in milliseconds </p>

</div>
</div>
<a id="a8b8af8bedcac87c0d3c68634448b94a7" name="a8b8af8bedcac87c0d3c68634448b94a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b8af8bedcac87c0d3c68634448b94a7">&#9670;&#160;</a></span>MSG_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSG_BUF_SIZE&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Complete message buffer size </p>

</div>
</div>
<a id="ab6426fc74901f4fbec94862ebb672b81" name="ab6426fc74901f4fbec94862ebb672b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6426fc74901f4fbec94862ebb672b81">&#9670;&#160;</a></span>RX_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_TIMEOUT&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>UART receive timeout in microseconds </p>

</div>
</div>
<a id="a630686ccbe0cb17e592951055a5da582" name="a630686ccbe0cb17e592951055a5da582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630686ccbe0cb17e592951055a5da582">&#9670;&#160;</a></span>RXBUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RXBUF_SIZE&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>UART receive buffer size </p>

</div>
</div>
<a id="aa90cac659d18e8ef6294c7ae337f6b58" name="aa90cac659d18e8ef6294c7ae337f6b58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90cac659d18e8ef6294c7ae337f6b58">&#9670;&#160;</a></span>SUCCESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SUCCESS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Operation successful return code </p>

</div>
</div>
<a id="a79aaa89920d05217559f07e3602af050" name="a79aaa89920d05217559f07e3602af050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79aaa89920d05217559f07e3602af050">&#9670;&#160;</a></span>TC74_CMD_RTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TC74_CMD_RTR&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read temperature command </p>

</div>
</div>
<a id="a4cba5a0e57322b7316b506dc43b8c699" name="a4cba5a0e57322b7316b506dc43b8c699"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cba5a0e57322b7316b506dc43b8c699">&#9670;&#160;</a></span>TC74_CMD_RWCR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TC74_CMD_RWCR&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read/write configuration register </p>

</div>
</div>
<a id="a70fdf721e437e719d33b32d0c83c2bba" name="a70fdf721e437e719d33b32d0c83c2bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70fdf721e437e719d33b32d0c83c2bba">&#9670;&#160;</a></span>temp_read_thread_period</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define temp_read_thread_period&#160;&#160;&#160;250</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Temperature reading period in milliseconds </p>

</div>
</div>
<a id="a923af2d146f214e75816a7f5993cee29" name="a923af2d146f214e75816a7f5993cee29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a923af2d146f214e75816a7f5993cee29">&#9670;&#160;</a></span>TXBUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXBUF_SIZE&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>UART transmit buffer size </p>

</div>
</div>
<a id="a07b40c5bd9acc44f62a9182527dbcc9b" name="a07b40c5bd9acc44f62a9182527dbcc9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b40c5bd9acc44f62a9182527dbcc9b">&#9670;&#160;</a></span>UART_NODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART_NODE&#160;&#160;&#160;DT_NODELABEL(uart0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Devicetree node identifier for UART0 </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2619e58b25b1bcc59e20cb1b73c7310e" name="a2619e58b25b1bcc59e20cb1b73c7310e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2619e58b25b1bcc59e20cb1b73c7310e">&#9670;&#160;</a></span>heat_control_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void heat_control_task </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Heater control task. </p>
<p>This thread waits for the PID controller task to signal it and then toggles the heater state based on the PID output and system state. It ensures the heater only operates when the system is on. </p>

</div>
</div>
<a id="a8a5b560954b6462095818770d0e7789e" name="a8a5b560954b6462095818770d0e7789e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5b560954b6462095818770d0e7789e">&#9670;&#160;</a></span>K_THREAD_DEFINE() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_DEFINE </td>
          <td>(</td>
          <td class="paramtype">heat_task_id</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a2619e58b25b1bcc59e20cb1b73c7310e">heat_control_task</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a41f948b647a1b72a9c59623255c5c5ae" name="a41f948b647a1b72a9c59623255c5c5ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41f948b647a1b72a9c59623255c5c5ae">&#9670;&#160;</a></span>K_THREAD_DEFINE() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_DEFINE </td>
          <td>(</td>
          <td class="paramtype">led_task_id</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a23b83f35eb770e6c215ba14af141453a">led_update_task</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ae66f738f9813b09b24efe29eb33a31" name="a4ae66f738f9813b09b24efe29eb33a31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae66f738f9813b09b24efe29eb33a31">&#9670;&#160;</a></span>K_THREAD_DEFINE() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_DEFINE </td>
          <td>(</td>
          <td class="paramtype">pid_task_id</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a9a4ed6d9069244aadb70f0c304d88ffa">pid_controller_task</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a23b3f2f07cc675e12d5237aee1224244" name="a23b3f2f07cc675e12d5237aee1224244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b3f2f07cc675e12d5237aee1224244">&#9670;&#160;</a></span>K_THREAD_DEFINE() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_DEFINE </td>
          <td>(</td>
          <td class="paramtype">temp_read_task_id</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ac483e8e0dcfa5da2b5c63fbd255b8d96">read_temperature_task</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae1b80325be28ebb0081ca82b0e7bd70d" name="ae1b80325be28ebb0081ca82b0e7bd70d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1b80325be28ebb0081ca82b0e7bd70d">&#9670;&#160;</a></span>K_THREAD_DEFINE() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_DEFINE </td>
          <td>(</td>
          <td class="paramtype">uart_command_id</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1024</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#a5b8520d3a5423e6fd8cf267bd72b5aa4">uart_command_task</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">5</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af123d816789543a0b63b64f6d4dd4735" name="af123d816789543a0b63b64f6d4dd4735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af123d816789543a0b63b64f6d4dd4735">&#9670;&#160;</a></span>K_TIMER_DEFINE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_TIMER_DEFINE </td>
          <td>(</td>
          <td class="paramtype">led_thread_timer</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timer for LED thread </p>

</div>
</div>
<a id="a47fc246ee29d0c24b2ec38c5d3da1a43" name="a47fc246ee29d0c24b2ec38c5d3da1a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47fc246ee29d0c24b2ec38c5d3da1a43">&#9670;&#160;</a></span>K_TIMER_DEFINE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_TIMER_DEFINE </td>
          <td>(</td>
          <td class="paramtype">temp_read_thread_timer</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NULL</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timer for temperature reading thread </p>

</div>
</div>
<a id="a23b83f35eb770e6c215ba14af141453a" name="a23b83f35eb770e6c215ba14af141453a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b83f35eb770e6c215ba14af141453a">&#9670;&#160;</a></span>led_update_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void led_update_task </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>LED update task. </p>
<p>This thread periodically updates the LED indicators based on system state:</p><ul>
<li>LED0: System power state (on/off)</li>
<li>LED1: Temperature within desired range (±2°C)</li>
<li>LED2: Temperature below desired range</li>
<li>LED3: Temperature above desired range </li>
</ul>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function. </p>
<p>Initializes system peripherals including LEDs, heater FET, UART, RTDB, and buttons. Configures UART receive/transmit buffers and starts the system.</p>
<dl class="section return"><dt>Returns</dt><dd>int SUCCESS on successful initialization. </dd></dl>

</div>
</div>
<a id="a9a4ed6d9069244aadb70f0c304d88ffa" name="a9a4ed6d9069244aadb70f0c304d88ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a4ed6d9069244aadb70f0c304d88ffa">&#9670;&#160;</a></span>pid_controller_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pid_controller_task </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PID controller task. </p>
<p>This thread waits for new sensor data from the temperature reading task and calculates the PID output to decide whether the heater should be on. It then signals the heat control task to work on the value saved on the rtdb. </p>

</div>
</div>
<a id="ac483e8e0dcfa5da2b5c63fbd255b8d96" name="ac483e8e0dcfa5da2b5c63fbd255b8d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac483e8e0dcfa5da2b5c63fbd255b8d96">&#9670;&#160;</a></span>read_temperature_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_temperature_task </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Temperature reading task. </p>
<p>This thread periodically reads the temperature from the TC74 sensor and updates the RTDB with the current temperature value.</p>
<dl class="section return"><dt>Returns</dt><dd>int SUCCESS on success, ERR_FATAL on failure </dd></dl>

</div>
</div>
<a id="a5b8520d3a5423e6fd8cf267bd72b5aa4" name="a5b8520d3a5423e6fd8cf267bd72b5aa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b8520d3a5423e6fd8cf267bd72b5aa4">&#9670;&#160;</a></span>uart_command_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uart_command_task </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART command processing task. </p>
<p>This thread waits for complete UART messages, processes the command, and sends a response back via UART. It coordinates with the UART callback to handle incoming messages.</p>
<dl class="section return"><dt>Returns</dt><dd>int SUCCESS on success, ERR_FATAL on failure. </dd></dl>

</div>
</div>
<a id="af619fe0b949297d40d50ab9f41e96999" name="af619fe0b949297d40d50ab9f41e96999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af619fe0b949297d40d50ab9f41e96999">&#9670;&#160;</a></span>uart_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int uart_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the UART peripheral. </p>
<p>This function initializes the UART device, sets its configuration, registers the callback, enables data reception, and prints a welcome message with instructions for the user.</p>
<dl class="section return"><dt>Returns</dt><dd>int SUCCESS on success, ERR_FATAL on failure </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1df4b86b2be1ca845e6ac8add540df7a" name="a1df4b86b2be1ca845e6ac8add540df7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df4b86b2be1ca845e6ac8add540df7a">&#9670;&#160;</a></span>controller_to_heater_sem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct k_sem controller_to_heater_sem = Z_SEM_INITIALIZER(controller_to_heater_sem, 0, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For executing the heat control based on the on/off value from the PID </p>

</div>
</div>
<a id="a3f9de6e69e47b326696d8303de20afcb" name="a3f9de6e69e47b326696d8303de20afcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f9de6e69e47b326696d8303de20afcb">&#9670;&#160;</a></span>sensor_to_controller_sem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct k_sem sensor_to_controller_sem = Z_SEM_INITIALIZER(sensor_to_controller_sem, 0, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For executing the PID controller on the new value after a sensor read </p>

</div>
</div>
<a id="a488edcde5226181def32ff5e16641bca" name="a488edcde5226181def32ff5e16641bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a488edcde5226181def32ff5e16641bca">&#9670;&#160;</a></span>startingMessage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool startingMessage = false</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acbbb8dc9e34f2cbd68792504dc18da81" name="acbbb8dc9e34f2cbd68792504dc18da81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbb8dc9e34f2cbd68792504dc18da81">&#9670;&#160;</a></span>uart_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct uart_config uart_cfg</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        .baudrate = 115200,</div>
<div class="line">        .parity = UART_CFG_PARITY_NONE,</div>
<div class="line">        .stop_bits = UART_CFG_STOP_BITS_1,</div>
<div class="line">        .data_bits = UART_CFG_DATA_BITS_8,</div>
<div class="line">        .flow_ctrl = UART_CFG_FLOW_CTRL_NONE</div>
<div class="line">}</div>
</div><!-- fragment --><p>UART configuration structure </p>

</div>
</div>
<a id="a660f23134aaae43c9ff2c6096fa59342" name="a660f23134aaae43c9ff2c6096fa59342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660f23134aaae43c9ff2c6096fa59342">&#9670;&#160;</a></span>uart_dev</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct device* uart_dev = DEVICE_DT_GET(<a class="el" href="#a07b40c5bd9acc44f62a9182527dbcc9b">UART_NODE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>UART device instance </p>

</div>
</div>
<a id="acb968f8cb59beade3bda9ee995ecd109" name="acb968f8cb59beade3bda9ee995ecd109"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb968f8cb59beade3bda9ee995ecd109">&#9670;&#160;</a></span>uart_full_message_sem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct k_sem uart_full_message_sem = Z_SEM_INITIALIZER(uart_full_message_sem, 0, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For executing the command processor when a complete message is received </p>

</div>
</div>
<a id="a7f447b32df78b68d1bd7a3581558ca3a" name="a7f447b32df78b68d1bd7a3581558ca3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f447b32df78b68d1bd7a3581558ca3a">&#9670;&#160;</a></span>uart_rxbuf_nchar</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int uart_rxbuf_nchar = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of characters in receive buffer </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
